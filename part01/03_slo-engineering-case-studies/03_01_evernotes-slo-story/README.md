# EvernoteのSLOストーリー

by Ben McCormack, Evernote

Evernoteは、個人やチームが情報を作成し、集めて、共有するのに役立つクロスプラットフォームのアプリです。
世界中に2億2000万人以上のユーザーがいる私たちは、プラットフォーム内に、テキストベースのメモ、ファイル、添付ファイル/画像を組み合わせた120億を超える情報を保存しています。
裏では、Evernoteサービスは750以上のMySQLインスタンスによって支えられています。

サービス品質を維持しながらエンジニアリングのスピードを向上させることを目的とした、これまでよりも広範な技術改善の一環としてSLOの概念をEvernoteに導入しました。
我々の目標には以下のようなものが含まれます。

* データセンターにおける差別化されない過重負荷から、顧客が実際に気にしているプロダクトエンジニアリング作業にエンジニアリングの焦点を移します。そのために、私たちは物理的なデータセンターの運用をやめ、パブリッククラウドに移行しました。
* 全体的なサービス品質を維持しつつ、機能のベロシティ向上をサポートするために、運用およびソフトウェアエンジニアのワーキングモデルを変えてください。
* 障害が我々の大規模でグローバルな顧客基盤にどのように影響するかということに確実に焦点を絞るために、SLAの見方を見直してください。

これらの目標は、多くの業界の組織にとって馴染みのあるものに見えるかもしれません。
これらの類の変更を行うための単一のアプローチが全面的に機能することはありませんが、我々の経験を共有することで、同様の課題に直面している他のユーザにとって有益な洞察が得られることを願っています。

## なぜEvernoteはSREモデルを採用したのか

この移行を始めた時、Evernoteは従来のops/dev分離を特徴としていました。運用チームはプロダクション環境の尊厳を保護し、一方で開発チームは顧客向けの新しいプロダクト機能の開発を任されていました。
これらの目的はいつも競合していました。開発チームは長い運用要件に制限されていると感じている一方で、運用チームは新しいコードによってプロダクション環境に新しい問題が混入されると苛立っていました。
この2つの目標の間で激しく揺れ動いたため、opsチームとdevチームの間には苛立ちや緊張関係が築かれてしまいました。
私たちは、関係するチームのさまざまなニーズをよりバランス良く満たす、より幸せな伝達手段に到達したいと考えました。

私たちは5年以上にわたって様々な方法でこの伝統的な二分法におけるギャップを解決しようとしました。
「あなたが書いた、あなたが実行した」(開発)モデル、そして「あなたが書いた、我々があなたのために実行する」(運用)モデルを試した後、SLO中心のSREアプローチに移行しました。

では、Evernoteがこの方針に向く動機は何だったのでしょうか。

Evernoteでは、運用と開発の中核となる規律をエンジニアが専門とすることができる個別の専門的な筋道として捉えています。
1つの筋道は、顧客への24時間365日の継続的なサービス提供に関係しています。
もう1つは、将来の顧客ニーズを満たすためのサービス拡張と進化に関するものです。
SREやDevOpsがソフトウェア開発を運用に適用することに重点を置くような動きと同様に、これら2つの規律は近年互いに歩み寄っています。(この収束は、データセンター自動化とパブリッククラウドの成長によって促進されており、これら双方によってソフトウェアによって完全に制御されたデータセンターがもたらされます。)
その一方で、フルスタックの所有権と継続的デプロイがソフトウェア開発にますます適用されています。

チームが共通の目標に向かって作業することを奨励しながら、運用と開発の違いを完全に受け入れるため、我々はSREモデルに惹かれました。
SREモデルは、運用エンジニアをアプリケーション開発者に、またはその逆に変換しようとはしません。
その代わり、両方に共通の基準を与えます。
私たちの経験上、エラー・バジェット/SLOのアプローチは会話から主観性の多くを排除するので、同じ事実が提示されたときに両方のチームが同じような決定を下すようになりました。

## SLOの導入：発展の道のり

私たちの旅の最初のパートは、物理データセンターからGoogle Cloud Platformへの移行でした。【1】
EvernoteサービスがGCP上で稼働し安定した後に、SLOを導入しました。
ここでの目標は2つありました。

* Evernote SLO内部にチームを配置し、すべてのチームが新しいフレームワークの中で作業していることを確認する。
* 根底にあるインフラストラクチャを担当していたGoogle Cloudチームとの連携手段にEvernoteのSLOを組み込みます。私たちは現在、全体的なモデルの中に新しいパートナーを持っていたので、GCPへの移行がユーザへのコミットメントを希薄にしたり、隠蔽したりしないようにする必要がありました。

およそ9か月間にわたってSLOを積極的に使用した後に、EvernoteではすでにSLOプラクティスバージョン3になっています。

----------
【1】しかし、それは別の本の話です。詳細については、[http://bit.ly/2spqgcl](http://bit.ly/2spqgcl)を参照してください。
