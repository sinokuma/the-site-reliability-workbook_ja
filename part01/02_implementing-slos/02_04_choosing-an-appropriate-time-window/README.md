# 適切なウィンドウを選択する

SLOは様々な時間間隔にわたって定義することができ、ローリングウィンドウまたはカレンダーに沿ったウィンドウ(例えば、月)のいずれかを使用することができます。
ウィンドウを選択するときには、いくつか考慮する必要がある要因があります。

ローリングウィンドウは、ユーザエクスペリエンスとより密接に連携しています。月の最終日に大規模な機能停止が発生した場合、翌月の初日にユーザが突然それを忘れることはありません。
常に同じ週数が含まれるように、この期間を整数の週数として定義することを推奨します。
例えば、30日間のウィンドウを使用している場合、4週間分の週末を含む期間もあれば5週間分の週末を含む期間もあります。
週末のトラフィックが平日のトラフィックと大幅に異なる場合、SLIはつまらない理由で変わる可能性があります。

カレンダーウィンドウは、事業計画やプロジェクト作業とより密接に連携しています。
例えば、SLOを四半期ごとに評価して、次の四半期のプロジェクトの要員をどこに焦点を合わせるかを決定することができます。
カレンダーウィンドウには不確定要素も含まれています。
四半期前半に残りの期間に受信するリクエスト量を知ることは不可能です。
したがって、四半期中頃の意思決定では、残りの期間でどの程度のエラー・バジェットを消費するか推測する必要があります。

短いタイムウィンドウであれば、より迅速に意思決定を行うことができます。
前週のSLOを見逃した場合は、例えば関連するバグを優先するといった小さなコース修正を行うと、将来のSLO違反を回避するのに役立ちます。

期間をより長くすると、より戦略的な意思決定に有利です。
例えば、3つの大規模プロジェクトのうち1つしか選択できない場合は、高可用性分散データベースへの移行、ロールアウトおよびロールバック手順の自動化、または別のゾーンへの重複スタックのデプロイのどれが良いと思いますか。
大規模で複数クォータをまたぐプロジェクトを評価するには、1週間以上の有用なデータが必要です。
必要なデータ量は、それを修正するために見積もられているエンジニアリング作業の量とほぼ同じです。

私たちは4週間のローリングウィンドウが汎用的で良いインターバルであることを発見しました。
この期間を、タスクの優先順位付けに関する週次サマリとプロジェクト計画に関する四半期ごとのサマリレポートで補足します。

データソースが許すのであれば、このSLO案を使用して、その期間における実際のSLOパフォーマンスを計算できます。
設計上、実際の測定値に基づいて初期SLOを設定した場合はSLOを満たしています。
しかし、ディストリビューションに関する興味深い情報も収集できます。
過去4週間でサービスがSLOを満たさなかった日がありましたか。
最近の出来事は実際のインシデントと関連がありますか。
インシデントに対応して当時に何らかの行動が取られましたか(または取られるべきでしたか)。

ログ、メトリクス、またはその他パフォーマンス履歴が分かるソースがない場合は、データソースを設定する必要があります。
例えば、HTTPサービスとの忠実性の低い解決策として、サービスに対して何らかの定期的なヘルスチェック(pingまたはHTTP GET)を実行し、成功したリクエストの数を報告するリモートモニタリングサービスを設定することができます。
多くのオンラインサービスがこのソリューションを簡単に実装できます。
