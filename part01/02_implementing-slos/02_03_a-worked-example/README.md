# 実例

図2-1に示すように、携帯電話ゲームの単純化されたアーキテクチャを考えてみましょう。

![携帯電話ゲームのアーキテクチャ例](img/figure_2-1.png)  
図2-1. 携帯電話ゲームのアーキテクチャ例

ユーザの携帯電話で実行されているアプリは、クラウド上で実行されているHTTPのAPIと対話します。
APIは状態の変更を永続的なストレージシステムに書き込みます。
このデータに対してパイプラインが定期的に実行され、今日、今週、総合でハイスコアを提供するリーグ表を生成します。
このデータは独立したリーグ表データストアに書き込まれ、結果はモバイルアプリ(ゲーム内スコア用)およびWebサイトから利用できます。
ユーザは、APIを介したゲーム内でもハイスコアWebサイトでも使用されるカスタムアバターをユーザデータテーブルにアップロードできます。

この設定であると仮定した場合、ユーザがシステムとどのようにやり取りするのか、そしてどのようなSLIがユーザエクスペリエンスのさまざまな側面を測定するのかを考えることができます。

これらのSLIの一部は重複することがあります。リクエスト駆動型サービスには正確性のSLIがあり、パイプラインには可用性のSLIがあり、耐久性のSLIは正確性のSLIの変形として見られることがあります。
顧客にとって最も重要な機能を表す少数(5つ以下)のSLIタイプを選択することをお勧めします。

典型的なユーザエクスペリエンスとロングテールの両方を把握するために、一部のタイプのSLIには複数段階のSLOを使用することも推奨します。
例えば、ユーザからのリクエストの90％が100ミリ秒以内に返却されるが、残りの10％が10秒かかる場合、多くのユーザは不幸になるでしょう。
レイテンシのSLOは、複数の閾値を設定することでこのユーザベースをとらえることができます。リクエストの90％は100ミリ秒より速く、リクエストの99％は400ミリ秒より速いといった具合です。
この原則は、ユーザの不幸を測定するパラメータを持つすべてのSLIに適用されます。
