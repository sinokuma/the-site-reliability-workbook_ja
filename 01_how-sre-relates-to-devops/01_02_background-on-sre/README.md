# SREの背景

サイトリライアビリティエンジニアリング(SRE)は、Googleのエンジニアリング担当VP、Ben Treynor Slossによって作成された用語(および関連する職務)です。【7】
前のセクションで分かるように、DevOpsは運用とプロダクト開発のライフサイクル全体のコラボレーションに関する幅広い原則です。
SREは職務であり、我々がうまく機能すると分かっている一連のプラクティス(後述)、そしてそれらのプラクティスを生み出す信念です。
DevOpsを哲学や仕事へのアプローチと考えるならば、SREはDevOpsが述べている哲学のいくつかを実装しており、例えば 「DevOpsエンジニア」よりも仕事や役割の具体的な定義に幾分近いと主張できます。【8】
したがって、ある意味でSREクラスはDevOpsインタフェースを実装しています。

複数の企業の指導者と実務者の協業から始められるDevOpsの動きとは異なり、GoogleのSREは、SREという用語が業界全体に広く普及する前に、周囲の企業から多くの文化を継承しました。
その軌跡を考えると、全体としての規律は現在デフォルトでDevOpsほど文化的変化を強調していません。
(もちろん、任意の組織でSREを行うために文化的変化が必要かどうかということをほのめかす訳ではありません。)

SREは、次の具体的な原則によって定義されます。

## 運用はソフトウェアの問題である

SREの基本的な考え方は、運用をうまくやることはソフトウェアの問題であるということです。
したがって、SREはソフトウェアエンジニアリングの手法を使用してその問題を解決すべきです。
これは、プロセスやビジネスの変更からビジネスロジックの単一障害点を排除するためにスタックを書き換えるといった同様に複雑ではあるが従来のソフトウェア問題まで視野は多岐に渡ります。

## サービスレベル目標(SLOs)によって管理する

SREはすべてにおいて100％の可用性を与えようとするわけではありません。
最初の本[「サイトリライアビリティエンジニアリング」](http://bit.ly/2kIcNYM)で説明したように、これは色々な理由で間違った目標です。
代わりに、プロダクトチームとSREチームはサービスとそのユーザベースの適切な可用性目標を選択し、そのSLOによってサービスを管理します。【9】
そのような目標を決めるには、事業からの強い協力が必要です。
SLOには文化的な意味合いもあります。つまり、ステークホルダー間の協調的な意思決定であるため、SLO違反があればチームは問答無用でふりだしに戻ります。

## トイルを最小限にするよう努める

SREの場合、手作業で、構造的に命令された運用作業は嫌いです。(これは、そのような運用がないことを意味するものではありません。我々はそのような運用を沢山抱えています。ただ好きではないのです。)
機械が望んでいる運用を実行できるのであれば、大体は機械がすべきであると考えています。
トイルが仕事であり、それをする人間に給料を支払っている他の組織では、ほとんど見られることのない[差別化(そして価値)](http://bit.ly/2xvlcIa)です。
Google文脈におけるSREの場合、トイルは仕事ではありませんし、なり得ません。
運用業務に費やされる時間は、プロジェクト作業に費やされない時間を意味し、プロジェクト作業とは、どうやってサービスの信頼性とスケーラビリティを向上させるかということです。

しかし、「本番環境の知恵」によって、運用タスクを実行すると意思決定に不可欠な情報が提供されます。
この作業をしていると、システムからのリアルタイムフィードバックによって我々はくぎ付けにされます。
最小限に抑える、または撲滅することができるように、トイルの源は識別可能である必要があります。
しかし、あなた自身が運用負荷があまりない位置にいる場合は、エンジニアがあなたがサポートするサービスの仕組みに親しみを持ち続けるために、新しい機能や変更をより頻繁にプッシュする必要があるでしょう。

### 本番環境の知恵

「本番環境の知恵」に関する注記：この言葉は、本番環境で実行されている何かから得られる知恵を意味します。現場の事実から孤立したホワイトボード上のサービスよりも、実際にどのように振舞うか、実際にどのようにソフトウェアを設計すべきかの乱雑な詳細です。
あなたが得るすべてのページ、チームが取得するチケットなどは、より良いシステム設計と振舞いを知らせる事実と直接繋がっています。

## 今年の仕事を自動化する

この分野の実際の作業は、どのような条件の下で、何を、どのように自動化するかを決定することです。

Googleで実践されているSREでは、持続的な価値を生み出すエンジニアリングに対立するものとしてのトイルにチームメンバが費やすことができる時間の上限があります。50%です。
多くの人がこの制限を上限と考えています。
実際、それは保証であると考える方がより有用です。つまり、何度も何度も無駄な作業をするよりも課題に対してエンジニアリングに基づくアプローチを取るための明示的な宣言かつ権限を与えられるメカニズムなのです。

我々が自動化やトイルについて考えるとき、このベンチマークと、それがどのように行動に表すかということの間には直感では理解できない興味深い相互関係があります。
時間が経つと、SREチームは、結局サービスのために可能なものすべてを自動化し、自動化できないものを置き去りにします([Murphy-Beyer効果](http://bit.ly/2Js7hau))。
他の条件が同じならば、他の行動がとられない限り、これによってSREチームのやることを支配します。
Googleの環境では、50％のエンジニアリング時間を変えない上限までさらにサービスを追加する、あるいは、行けるところまで自動化に成功した結果代わりに全く違うことをする傾向があります。

## 失敗コストを減らすことによって素早く行動する

SREに従事することの主な利点の1つは、必ずしも信頼性の向上というわけではありませんが、確かにそれは起こります。 実際にプロダクト開発の成果が向上しています。
なぜでしょうか。一般的な故障の平均復旧時間(MTTR)を短縮すると、プロダクト開発者の速度が向上します。エンジニアが時間を無駄にしたり、これらの問題の後にクリーンアップに注力したりする必要がないためです。
これはプロダクトライフサイクルの後半に問題が発見されるほど、修正するのによりコストがかかるという周知の事実に従います。
望ましくない問題発見の遅れを改善し、会社全体にとって利益をもたらすことが、SREには特に義務付けられています。

## 開発者と当事者意識を共有する

「アプリケーション開発」と「プロダクション」(時折、プログラマとオペレータと呼ばれる)の厳密な境界は逆効果です。
職責の分離とコストセンターとして運用を分類することによって評価または報酬の不均衡や矛盾を引き起こす場合は、特にそうです。

SREはビジネスロジックの問題ではなく、本番環境上の問題に焦点を当てる傾向がありますが、そのアプローチによってソフトウェアエンジニアリングツールを使って問題に取り組む際に、プロダクト開発チームとスキルセットを共有します。
一般的にSREには、彼らが目指しているサービスの可用性、レイテンシ、パフォーマンス、効率性、変更管理、監視、緊急対応、およびキャパシティプランニングに関する専門知識があります。
これらの具体的な(通常はよく定義された)コンピテンシーは、プロダクトと関連するプロダクト開発チームにとってSREが果たす本来の役割です。【10】
理想的には、プロダクト開発チームとSREチームの両方は、フロントエンド、バックエンド、ライブラリ、ストレージ、カーネル、物理マシンなど、スタックの全体像を把握する必要があります。そして、いかなるチームも用心深く単一のコンポーネントを所有すべきではありません。
「線引きをぼやけさせ【11】」、SREの手段としてJavaScriptを与えたり、プロダクト開発者にカーネルを任せたりすれば、もっと多くのことができることが分かりました。どのように変更を加えるかに関する知識や、そのようにする権限は非常に広範であり、特定の機能を用心深く守る誘因は取り除かれます。

変更を行う方法とその権限を知ることはずっと普及しています。 特定の機能を嫉妬に守ることは取り除かれます。

[サイトリライアビリティエンジニアリング](http://bit.ly/2kIcNYM)の中では、Googleのプロダクト開発チームが当初の段階からサービスを所有していることを十分に明確にしていませんでした。
SREの原則は依然としてGoogleの至る所でサービスがどのように管理されているかの情報は提供しますが、SREは大量のサービスに対して利用可能でもなければ、保証もされていません。【12】
SREチームが製プロダクト開発チームと協業するときのオーナーシップモデルは、結局のところ共有モデルです。

## 機能または役職に関係なく、同じツールを使用する

ツール化は行動を決定する上で非常に重要な要因であり、Google内の状況において、SREの有効性が広くアクセス可能な[統一されたコードベース](http://bit.ly/2J4jgMi)や幅広いソフトウェアとシステムツール、[高度に最適化された独自の](http://bit.ly/2J6wkkp)プロダクションスタック等とは無関係であると仮定するのは認識が甘いということになるでしょう。
しかし、この絶対的な前提をDevOpsと共有します。組織内の役割にかかわらず、サービス【13】を提供するチームは同じツールを使用すべきです。
SREのためのツールとプロダクト開発者のための別のツールを持つサービスを管理するための良い方法はありません。状況が異なれば、異なる(潜在的には大惨事をもたらすほどに)振舞いをします。
相違が多ければ多いほど、個々のツールを改善するための努力から得られる利益は少なくなります。

----------
【7】GoogleのSREの歴史は、より運用上重視されていた先駆的なチームから生じたことであり、Benは技術的観点から問題に対処するための刺激を与えました。

【8】これは多数の方面で誤解されています。おそらく最も基本的なことは、単に人を雇い、彼らのことを「DevOpsエンジニア」と呼んで、すぐに利益を期待することはできないということです。あなたは利益のために働く方法を変える哲学全体を認めざるを得ません。[Andrew Clay Shaferが言っているように](http://bit.ly/2sy7UVI)、「人々がDevOpsを売っても、それを買うことはできない」のです。そして、Seth Vargoが[「DevOpsの10の神話」](http://bit.ly/2HcHmP1)で指摘したように、あなたの組織を是正するためにDevOpを雇うことはできません。

【9】サービスレベル目標は、特定のメトリックを運用実績のための目標です。(例えば、利用可能な時間の99.9％)

【10】もちろん、すべてのチームがすべてを行うわけではありませんが、SRE業務下においては最も一般的な項目です。

【11】これをレイヤードスタックと考える場合、レイヤリング違反を侵すことになります。

【12】実際、何かしらをオンボードするために生産前審査があります。SREは立ったままでのスタートからサービスをオンボードするだけではありません。

【13】サービスとは、一般的に可用性の制約の中で業務要件を満たすために実行されるソフトウェアとして大まかに定義されています。
